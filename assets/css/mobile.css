/* ===== Responsive mobile/tablette (couche additive) ===== */

/* 1) Sécurité globale */
html, body { max-width: 100%; overflow-x: hidden; }

/* 2) Médias toujours fluides */
img, video, canvas, svg, iframe { max-width: 100%; height: auto; }

/* 3) Header/menu : garder ton menu, le faire respirer et s’adapter */
@media (max-width: 1024px) {
  .site-header {
    padding: .6rem 1rem;           /* header plus compact */
    gap: .6rem;
  }
  .site-title a {
    font-size: 1.1rem;             /* titre un peu réduit */
    white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
    max-width: 65vw;               /* évite le chevauchement en très petit écran */
  }

  /* La barre principale peut passer sur plusieurs lignes si besoin */
  .menu-primary {
    flex-wrap: wrap;               /* << clé responsive */
    gap: .5rem .8rem;
  }
  .menu-primary a {
    padding: .5rem .7rem;          /* meilleures zones de tap */
    border-radius: 8px;
  }
}

/* 4) Très petits écrans : basculer la nav en colonne si ça coince */
@media (max-width: 640px) {
  .menu-primary {
    width: 100%;
    justify-content: flex-start;
    /* si tu préfères une colonne pure, décommente :
    flex-direction: column; align-items: stretch;
    */
  }
  /* .menu-primary a { text-align: left; }  <-- si colonne */
}

/* 5) Footer : toujours en bas, sans remonter (complémente ton layout) */
@media (max-width: 1024px) {
  footer { padding: .9rem 1rem; font-size: .92rem; }
}

/* 6) Grilles/colonnes génériques → empilement simple */
@media (max-width: 980px) {
  .grid-2, .two-col,
  .grid-3, .three-col,
  .grid-4, .four-col {
    display: grid; gap: 1rem; grid-template-columns: 1fr;
  }
}

/* 7) Blog viewer : adoucir les espacements en mobile */
@media (max-width: 980px) {
  .viewer-layout { margin: calc(var(--header-h, 56px) + 12px) 0 20px 0; }
  #article-viewer { padding: 1.1rem; }
}

/* 8) Accueil : carte plus souple en mobile */
@media (max-width: 768px) {
  .welcome { margin: 1rem; padding: 1.2rem 1.4rem; }
  .welcome h1 { font-size: 1.7rem; }
  .welcome-text { font-size: 1rem; line-height: 1.65; }
}

/* 9) Ancrage lisible avec header sticky */
:target { scroll-margin-top: 72px; }

/* 10) Préférence utilisateur (réduction mouvement) */
@media (prefers-reduced-motion: reduce) {
  * { animation: none !important; transition: none !important; }
}

/* ===== Burger mobile (sans impacter le desktop) ===== */

/* Desktop : le système burger est caché */
@media (min-width: 901px) {
  #mb-burger, #mb-drawer, #mb-scrim { display: none !important; }
}

/* Mobile : on masque la barre desktop, on montre le burger */
@media (max-width: 900px) {
  /* On garde le titre (.site-title) et le switch thème (.menu-switch) visibles */
  .menu-primary { display: none !important; }

  /* Le header devient référentiel pour positionner le burger */
  .site-header { position: sticky; top: 0; z-index: 1000; }
  .site-header { position: relative; }

  /* Burger */
  .mb-burger {
    position: absolute; top: .6rem; right: .8rem; z-index: 1100;
    width: 42px; height: 42px; border-radius: 10px;
    border: 1px solid currentColor; background: none; padding: 0;
    display: inline-flex; align-items: center; justify-content: center; gap: 4px;
  }
  .mb-burger span { width: 20px; height: 2px; background: currentColor; display: block; }

  /* Un peu d’air pour le titre et le bouton thème pour éviter le chevauchement */
  .site-title a { padding-right: 52px; }
  .menu-switch { margin-right: 52px; }

  /* Drawer */
  .mb-drawer {
    position: fixed; inset: 0 auto 0 0; width: min(82vw, 360px);
    transform: translateX(-100%); transition: transform .25s ease;
    background: var(--drawer-bg, rgba(18,18,18,.96));
    color: var(--text-color, inherit);
    z-index: 1099; padding: 1rem .8rem;
  }
  .mb-drawer.is-open { transform: translateX(0); }
  .mb-drawer[hidden] { display: block; } /* garde l’élément pour l’anim */

  .mb-list { list-style: none; margin: 0; padding: 0; display: flex; flex-direction: column; gap: .25rem; }
  .mb-list a {
    display: block; padding: .7rem .8rem; border-radius: 10px; text-decoration: none;
  }
  .mb-list a[aria-current="page"] {
    outline: 2px solid currentColor; outline-offset: 2px; font-weight: 600;
  }

  /* Voile */
  .mb-scrim {
    position: fixed; inset: 0; background: rgba(0,0,0,.35);
    opacity: 0; pointer-events: none; transition: opacity .2s ease; z-index: 1090;
  }
  .mb-scrim.is-open { opacity: 1; pointer-events: auto; }

  /* Bloquer le scroll de fond quand le tiroir est ouvert */
  html.mb-no-scroll, body.mb-no-scroll { overflow: hidden; }
}
