/* ===============================
   Thème sombre — Nuit étoilée (version bleu profond) CORRIGÉ
   =============================== */

:root[data-theme="dark"] {
  /* Bleu nuit profond avec dégradé plus prononcé */
  --bg-color: radial-gradient(
    ellipse at 50% 100%,
    #0a1525 0%,
    #081020 55%,
    #050a14 100%
  );

  --text-color: #e6f1ff;
  --muted-color: #a8c6ff;
  --link-color: #90bfff;
  --accent-color: #5eb0ff;
  --star-color: #ffffff;

  --header-bg: rgba(10, 20, 35, 0.75);
  --footer-bg: rgba(10, 20, 35, 0.75);

  --nav-hover-bg: rgba(255, 255, 255, 0.08);
  --card-bg: rgba(15, 25, 45, 0.4);

  /* image adaptée au thème sombre */
  --home-hero: url("/img/hero-dark.png");
}

}

[data-theme="dark"] body {
  background: var(--bg-color);
  color: var(--text-color);
  overflow-x: hidden;
  min-height: 100vh;
}

/* Halo étoilé plus prononcé */
[data-theme="dark"] body::before {
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  background: 
    radial-gradient(ellipse at 30% 20%, rgba(120, 170, 255, 0.15) 0%, transparent 40%),
    radial-gradient(ellipse at 70% 30%, rgba(100, 150, 255, 0.1) 0%, transparent 40%),
    radial-gradient(ellipse at 50% 80%, rgba(80, 130, 255, 0.08) 0%, transparent 50%);
  z-index: 0;
}

/* Canvas étoiles */
[data-theme="dark"] #theme-canvas {
  position: fixed;
  inset: 0;
  z-index: 0;
  opacity: 1;
  pointer-events: none;
}

/* Header & footer avec bleu plus profond */
[data-theme="dark"] header,
[data-theme="dark"] footer {
  background: var(--header-bg);
  color: var(--text-color);
  backdrop-filter: blur(8px) brightness(0.9);
  -webkit-backdrop-filter: blur(8px) brightness(0.9);
  border-bottom: 1px solid rgba(60, 110, 180, 0.2);
}

[data-theme="dark"] footer {
  border-top: 1px solid rgba(60, 110, 180, 0.2);
  border-bottom: none;
}

/* Liens avec effet lumineux amélioré */
[data-theme="dark"] a {
  color: var(--link-color);
  transition: color 0.25s ease, text-shadow 0.25s ease;
}

[data-theme="dark"] a:hover {
  color: var(--accent-color);
  text-shadow: 0 0 10px rgba(94, 176, 255, 0.7);
}

/* Bouton thème */
[data-theme="dark"] #theme-btn {
  font-size: 1.3rem;
  color: var(--text-color);
  transition: transform 0.2s ease, text-shadow 0.25s ease;
}

[data-theme="dark"] #theme-btn:hover {
  transform: scale(1.1);
  text-shadow: 0 0 12px rgba(94, 176, 255, 0.8);
}

/* CORRECTION : Styles de menu unifiés avec le thème clair */
[data-theme="dark"] .menu-primary a {
  /* Ces valeurs doivent correspondre à celles du thème clair */
  /* padding, margin et border-radius supprimés pour harmonisation avec menu.css */
  transition: all 0.3s ease;
}

[data-theme="dark"] .menu-primary a:hover {
  background: var(--nav-hover-bg);
  /* Pas de transformation qui modifierait l'espacement */
  transform: none;
}

/* Style du bouton actif en bleu - MODIFIÉ pour éviter les changements de dimension */
[data-theme="dark"] .menu-primary a.active,
[data-theme="dark"] .menu-primary a:active,
[data-theme="dark"] .menu-primary a[aria-current="page"] {
  background: rgba(30, 90, 180, 0.25) !important;
  color: var(--accent-color) !important;
  border: 1px solid rgba(94, 176, 255, 0.4) !important;
  box-shadow: 
    0 0 12px rgba(94, 176, 255, 0.3),
    inset 0 0 15px rgba(94, 176, 255, 0.1) !important;
  text-shadow: 0 0 8px rgba(94, 176, 255, 0.7) !important;
  /* S'assurer que la bordure n'ajoute pas d'espace supplémentaire */
  box-sizing: border-box;
}

[data-theme="dark"] .menu-primary a.active:hover,
[data-theme="dark"] .menu-primary a[aria-current="page"]:hover {
  background: rgba(30, 90, 180, 0.35) !important;
  box-shadow: 
    0 0 15px rgba(94, 176, 255, 0.4),
    inset 0 0 20px rgba(94, 176, 255, 0.15) !important;
}

/* Animation de pulse pour le bouton actif */
@keyframes active-pulse {
  0% { box-shadow: 0 0 10px rgba(94, 176, 255, 0.3), inset 0 0 15px rgba(94, 176, 255, 0.1); }
  50% { box-shadow: 0 0 15px rgba(94, 176, 255, 0.5), inset 0 0 20px rgba(94, 176, 255, 0.15); }
  100% { box-shadow: 0 0 10px rgba(94, 176, 255, 0.3), inset 0 0 15px rgba(94, 176, 255, 0.1); }
}

[data-theme="dark"] .menu-primary a.active,
[data-theme="dark"] .menu-primary a[aria-current="page"] {
  animation: active-pulse 4s infinite ease-in-out;
}

/* Transparence préservée pour le contenu */
[data-theme="dark"] main,
[data-theme="dark"] .home-shell,
[data-theme="dark"] .welcome,
[data-theme="dark"] section {
  background: transparent !important;
}

/* Ajouts pour améliorer l'ambiance nuit étoilée */
[data-theme="dark"] h1, 
[data-theme="dark"] h2, 
[data-theme="dark"] h3 {
  color: var(--accent-color);
  text-shadow: 0 0 5px rgba(94, 176, 255, 0.3);
}

[data-theme="dark"] code {
  background: rgba(15, 30, 50, 0.4);
  color: var(--accent-color);
  border: 1px solid rgba(60, 110, 180, 0.3);
  padding: 0.2rem 0.4rem;
  border-radius: 4px;
}

[data-theme="dark"] .card, 
[data-theme="dark"] article {
  background: var(--card-bg);
  backdrop-filter: blur(5px);
  border: 1px solid rgba(70, 130, 220, 0.15);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
  border-radius: 8px;
  padding: 1.5rem;
  margin-bottom: 2rem;
}
