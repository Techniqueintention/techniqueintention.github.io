/* ===============================
   Layout Viewer — menu fixe gauche
   =============================== */

:root{
  --pad-left: 40px;
  --menu-w: 300px;
  --article-min: 720px;
  --article-max: 1180px;
  --gap-fixed: 40px;
  --header-h: 64px;
}

/* Container principal - DESKTOP */
.viewer-layout{
  display:grid;
  grid-template-columns: var(--pad-left) var(--menu-w) var(--gap-fixed) minmax(var(--article-min), var(--article-max)) 1fr;
  max-width:none;
  margin: calc(var(--header-h) + 38px) 0 28px 0;
  padding:0;
  align-items:start;
}

/* Menu latéral */
.blog-menu{
  grid-column:2;
  position:sticky;
  top: calc(var(--header-h) + 20px);
  align-self:start;
  width: var(--menu-w);
  max-width:none;
  height: calc(100vh - var(--header-h) - 40px);
  overflow-y:auto;
}
.blog-menu details{ margin-bottom:.7rem; border-radius:12px; }

/* Bloc article */
#article-viewer{
  grid-column:4;
  width:100%;
  max-width:none;
  min-height:400px;
  padding:2rem 2.6rem;
  border-radius:16px;
  background: var(--bloc-bg, rgba(255,255,255,.08));
  border:1px solid var(--bloc-border, rgba(0,0,0,.1));
  box-shadow: 0 0 20px var(--bloc-shadow, rgba(0,0,0,.12));
  line-height:1.75;
  overflow-wrap:anywhere;
}

/* Typo article */
#article-viewer h1{
  font-family:"Cinzel", serif;
  font-size:1.9rem;
  text-align:center;
  color:var(--link-color);
  margin:0 0 1rem;
}
#article-viewer h2{ font-size:1.2rem; margin:1.4rem 0 .7rem; }
#article-viewer p{ margin:0 0 1rem; }
#article-viewer .placeholder{ opacity:.7; }

/* Tools */
#article-tools{ text-align:right; margin-bottom:.8rem; }
#article-tools .btn-share-article{
  display:inline-flex; align-items:center; gap:.5rem;
  padding:.45em .9em; border-radius:10px;
  background: var(--btn-bg, rgba(255,255,255,.08));
  border:1px solid var(--btn-border, rgba(255,255,255,.25));
  cursor:pointer; transition:.2s;
}
#article-tools .btn-share-article:hover{ transform:translateY(-1px); box-shadow:0 6px 18px rgba(0,0,0,.15); }

/* Thèmes */
:root[data-theme="light"] #article-viewer{ background:rgba(255,255,255,.75); color:#222; }
:root[data-theme="dark"]  #article-viewer{
  background: rgba(6,10,24,.9);
  color:#f0f0f0;
  border:1px solid rgba(255,255,255,.08);
  box-shadow:0 0 20px rgba(0,0,0,.4);
}

/* ===== Topbar (titre + bouton Sections) ===== */
.viewer-topbar{
  display:flex; align-items:center; justify-content:space-between;
  gap:.8rem;
  margin: calc(var(--header-h) + 10px) 1rem .6rem 1rem;
}
.viewer-title{
  font-family:"Cinzel",serif;
  font-size:1.4rem; letter-spacing:.5px; margin:0;
}

/* Bouton Sections (texte géré en CSS) */
.menu-toggle-btn{
  position:sticky; top: calc(var(--header-h) + 8px);
  z-index:1100;
  display:inline-flex; align-items:center; gap:.5rem;
  padding:.45rem .7rem; border-radius:10px;
  background: color-mix(in oklab, var(--menu-card-bg, rgba(255,255,255,.12)) 80%, transparent);
  border:1px solid var(--menu-border, rgba(0,0,0,.12));
  backdrop-filter: blur(6px);
  font-weight:600; cursor:pointer; user-select:none;
  box-shadow:0 6px 18px rgba(0,0,0,.08);
}
.menu-toggle-btn::before{ content:"☰ Sections"; }
.menu-toggle:checked + .menu-toggle-btn::before{ content:"✕ Fermer"; }

/* ===== Offcanvas (drawer mobile) ===== */
.offcanvas{ position:fixed; inset:0; pointer-events:none; z-index:1200; display:block; }
.offcanvas-panel{
  position:fixed; left:0; top:var(--header-h);
  height:calc(100dvh - var(--header-h));
  width:min(78vw, 300px);                 /* plus étroit */
  transform:translateX(-100%);
  transition:transform .3s ease;
  pointer-events:auto; overflow-y:auto;
  padding:.6rem .6rem 1rem;
  background: color-mix(in oklab, var(--menu-card-bg, rgba(255,255,255,.10)) 88%, transparent);
  border-right:1px solid var(--menu-border, rgba(0,0,0,.12));
  backdrop-filter: blur(8px);
  border-top-right-radius:12px; border-bottom-right-radius:12px;
}
.offcanvas-scrim{
  position:fixed; inset:0; background:rgba(0,0,0,.35);
  opacity:0; transition:opacity .3s ease; pointer-events:none;
}
.offcanvas-close{
  display:inline-flex; align-items:center; justify-content:center;
  width:2rem; height:2rem; border-radius:8px;
  margin:.2rem .2rem .4rem 0; float:right; cursor:pointer;
  background:rgba(0,0,0,.08); border:1px solid rgba(0,0,0,.12); font-weight:700;
}

/* Toggle ouverture */
.menu-toggle:checked ~ .offcanvas .offcanvas-panel{ transform:translateX(0); }
.menu-toggle:checked ~ .offcanvas .offcanvas-scrim{ opacity:1; pointer-events:auto; }

/* ===============================
   Responsive (≤ 980px)
   =============================== */
@media (max-width:980px){
  .viewer-layout{ display:block; margin: 0 1rem 1rem; }
  #article-viewer{ width:100%; padding:1rem; }
}

/* Desktop : on masque le drawer & on garde la grille */
@media (min-width:981px){
  .menu-toggle, .menu-toggle-btn, .offcanvas, .offcanvas-scrim, .offcanvas-panel, .offcanvas-close{ display:none; }
  .viewer-topbar{ margin: calc(var(--header-h) + 20px) var(--pad-left) .6rem; }
  .viewer-title{ font-size:1.6rem; }
}
